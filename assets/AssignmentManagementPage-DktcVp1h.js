import{j as e}from"./markdown-C51tXKe3.js";import{r as o}from"./router-sIAq8EKR.js";import{A as c,a as g,S as D}from"./StatusBadge-Bk9Ichlf.js";import{F as A,r as C,u as h,q as I,D as T,v as M}from"./icons-BugFtrr0.js";import"./react-vendor-c5ypKtDW.js";const b=[{id:"1",title:"Day 1 최종 과제: AI 에이전트 개념 정리",description:"학습한 내용을 바탕으로 AI 에이전트의 주요 개념을 정리하세요",contentItemId:"day1-final",dueDate:"2025-01-20T23:59:59Z",maxFileSizeMb:10,allowedFileTypes:["pdf","docx","txt","md"],totalStudents:30,submittedCount:25,createdAt:"2025-01-15T00:00:00Z"},{id:"2",title:"Day 2 중간 과제: RAG 시스템 구현",description:"Streamlit을 활용하여 RAG 시스템을 구현하세요",contentItemId:"day2-mid",dueDate:"2025-01-21T23:59:59Z",maxFileSizeMb:50,allowedFileTypes:["zip","tar.gz"],totalStudents:30,submittedCount:18,createdAt:"2025-01-16T00:00:00Z"}],m=[{id:"1",assignmentId:"1",assignment:{id:"1",title:"Day 1 최종 과제: AI 에이전트 개념 정리",dueDate:"2025-01-20T23:59:59Z"},student:{id:"1",name:"김이화",email:"student1@ewha.ac.kr",studentId:"2024123456",cohort:"2024-08"},fileName:"day1_assignment.pdf",fileUrl:"/uploads/assignments/day1_assignment.pdf",fileSizeBytes:1024e3,comments:"과제 제출합니다. 피드백 부탁드립니다.",submittedAt:"2025-01-17T10:30:00Z",reviewStatus:"pending"},{id:"2",assignmentId:"1",assignment:{id:"1",title:"Day 1 최종 과제: AI 에이전트 개념 정리",dueDate:"2025-01-20T23:59:59Z"},student:{id:"2",name:"박학생",email:"student2@ewha.ac.kr",studentId:"2024123457",cohort:"2024-08"},fileName:"ai_agent_summary.docx",fileUrl:"/uploads/assignments/ai_agent_summary.docx",fileSizeBytes:512e3,submittedAt:"2025-01-17T09:15:00Z",reviewStatus:"approved",score:95,feedback:"훌륭한 정리입니다. 개념 이해도가 매우 높습니다.",reviewedAt:"2025-01-17T14:20:00Z",reviewerName:"강사A"}],p=[{id:"3",name:"이수연",email:"student3@ewha.ac.kr",studentId:"2024123458",department:"데이터사이언스과",cohort:"2024-08",status:"registered",uploadedAt:"2025-01-01T00:00:00Z",registeredAt:"2025-01-03T14:20:00Z",uploadedByName:"관리자",totalLearningTime:120,completedItems:2}],R=()=>{const[t,j]=o.useState(b[0]),[v,u]=o.useState(!1),[d,x]=o.useState(null),[r,l]=o.useState({status:"approved",score:"",feedback:""}),f=[{key:"student",title:"학생",render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.student.name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.student.studentId})]})},{key:"fileName",title:"파일",render:(s,a)=>e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",children:s}),e.jsxs("div",{className:"text-xs text-gray-500",children:[(a.fileSizeBytes/1024/1024).toFixed(1),"MB"]})]})},{key:"submittedAt",title:"제출시간",render:s=>e.jsx("span",{className:"text-sm",children:new Date(s).toLocaleString()})},{key:"reviewStatus",title:"상태",render:s=>e.jsx(D,{status:s,size:"sm"})},{key:"score",title:"점수",render:s=>e.jsx("div",{className:"flex items-center",children:s?e.jsxs(e.Fragment,{children:[e.jsx(h,{size:14,className:"text-yellow-500 mr-1"}),e.jsxs("span",{className:"font-medium",children:[s,"점"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})}],y=[{key:"name",title:"학생",render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-sm text-gray-500",children:a.studentId})]})},{key:"email",title:"이메일"}],N=s=>{x(s),l({status:s.reviewStatus==="pending"?"approved":s.reviewStatus,score:s.score?.toString()||"",feedback:s.feedback||""}),u(!0)},w=()=>{d&&(console.log("Submitting review:",{submissionId:d.id,...r}),u(!1),x(null))},n={pendingReview:m.filter(s=>s.reviewStatus==="pending").length,avgScore:m.filter(s=>s.score).reduce((s,a)=>s+(a.score||0),0)/m.filter(s=>s.score).length||0,submissionRate:t.submittedCount/t.totalStudents*100},i=s=>{const a=new Date(s),S=new Date,k=a.getTime()-S.getTime();return Math.ceil(k/(1e3*60*60*24))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border-l-4 border-amber-500 bg-amber-50 p-4 rounded-lg",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"과제 관리"}),e.jsx("p",{className:"text-amber-700",children:"과제 제출 현황 및 검토 관리"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"과제 선택"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:b.map(s=>e.jsxs("div",{onClick:()=>j(s),className:`
                p-4 border-2 rounded-lg cursor-pointer transition-colors
                ${t.id===s.id?"border-amber-500 bg-amber-50":"border-gray-200 hover:border-gray-300"}
              `,children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["제출률: ",Math.round(s.submittedCount/s.totalStudents*100),"%"]}),e.jsxs("span",{children:["(",s.submittedCount,"/",s.totalStudents,")"]}),e.jsxs("span",{children:["마감: ",i(s.dueDate)>0?`${i(s.dueDate)}일 후`:"마감됨"]})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(c,{title:"제출률",value:`${Math.round(n.submissionRate)}%`,subtitle:`${t.submittedCount}/${t.totalStudents}`,icon:A,color:"blue"}),e.jsx(c,{title:"검토 대기",value:n.pendingReview,subtitle:"건",icon:C,color:"amber"}),e.jsx(c,{title:"평균 점수",value:n.avgScore?`${Math.round(n.avgScore)}점`:"-",icon:h,color:"green"}),e.jsx(c,{title:"마감까지",value:i(t.dueDate)>0?`${i(t.dueDate)}일`:"마감됨",icon:I,color:i(t.dueDate)<=1?"red":"gray"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["제출물 목록 - ",t.title]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]}),e.jsx(g,{data:m.filter(s=>s.assignmentId===t.id),columns:f,actions:[{key:"download",label:"다운로드",icon:T,onClick:s=>window.open(s.fileUrl,"_blank")},{key:"review",label:"검토",variant:"primary",onClick:N}],emptyMessage:"아직 제출된 과제가 없습니다."})]})}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"미제출 학생"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[p.length,"명"]})]}),e.jsx(g,{data:p,columns:y,actions:[{key:"remind",label:"알림",icon:M,onClick:s=>console.log("Send reminder to:",s.email)}],emptyMessage:"모든 학생이 제출했습니다!"})]})})]}),v&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"과제 검토"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"학생:"})," ",d.student.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"학번:"})," ",d.student.studentId]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"파일:"}),e.jsx("button",{onClick:()=>window.open(d.fileUrl,"_blank"),className:"text-blue-600 hover:text-blue-800 ml-1",children:d.fileName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"제출시간:"})," ",new Date(d.submittedAt).toLocaleString()]})]}),d.comments&&e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"font-medium",children:"학생 코멘트:"}),e.jsx("p",{className:"text-gray-700 mt-1",children:d.comments})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"검토 결과"}),e.jsxs("select",{value:r.status,onChange:s=>l({...r,status:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"approved",children:"승인"}),e.jsx("option",{value:"needs_revision",children:"수정 필요"}),e.jsx("option",{value:"rejected",children:"거부"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"점수 (0-100)"}),e.jsx("input",{type:"number",min:"0",max:"100",value:r.score,onChange:s=>l({...r,score:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"점수를 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"피드백"}),e.jsx("textarea",{value:r.feedback,onChange:s=>l({...r,feedback:s.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"학생에게 전달할 피드백을 작성하세요"})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"취소"}),e.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"검토 저장"})]})]})})]})},U=()=>e.jsx(R,{});export{U as AssignmentManagementPage};
