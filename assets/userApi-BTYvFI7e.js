const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-8MKmb4U0.js","assets/markdown-C51tXKe3.js","assets/router-sIAq8EKR.js","assets/react-vendor-c5ypKtDW.js","assets/store-DMBmCmPj.js","assets/icons-BTB9q9YK.js","assets/animation-DJT5yzp0.js","assets/index-Bdiy7PfL.css"])))=>i.map(i=>d[i]);
import{j as m}from"./markdown-C51tXKe3.js";import"./router-sIAq8EKR.js";import{_ as b}from"./index-8MKmb4U0.js";const k=({status:e,size:t="md"})=>{const s={sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm"},a={pending:{label:"대기중",classes:"bg-gray-100 text-gray-800"},approved:{label:"승인됨",classes:"bg-green-100 text-green-800"},rejected:{label:"거부됨",classes:"bg-red-100 text-red-800"},registered:{label:"가입완료",classes:"bg-blue-100 text-blue-800"},blocked:{label:"차단됨",classes:"bg-red-100 text-red-800"},needs_revision:{label:"수정필요",classes:"bg-amber-100 text-amber-800"},submitted:{label:"제출됨",classes:"bg-indigo-100 text-indigo-800"},reviewed:{label:"검토됨",classes:"bg-purple-100 text-purple-800"},in_progress:{label:"진행중",classes:"bg-yellow-100 text-yellow-800"},completed:{label:"완료",classes:"bg-green-100 text-green-800"}}[e];return m.jsx("span",{className:`
        inline-flex items-center rounded-full font-medium
        ${s[t]}
        ${a.classes}
      `,children:a.label})},h="https://modulabs.ddns.net/ewha/api/v1",o=async(e,t={})=>{const s=`${h}${e}`,a=(()=>{const r=localStorage.getItem("auth-storage");return r&&JSON.parse(r).state?.tokens?.accessToken||null})(),i={"Content-Type":"application/json",...t.headers};a&&(i.Authorization=`Bearer ${a}`);const d={headers:i,...t},c=await fetch(s,d);if(c.status===401&&a)try{const{useAuthStore:r}=await b(async()=>{const{useAuthStore:n}=await import("./index-8MKmb4U0.js").then(u=>u.d);return{useAuthStore:n}},__vite__mapDeps([0,1,2,3,4,5,6,7])),{refreshToken:g}=r.getState();await g();const p=r.getState().tokens?.accessToken;if(p){i.Authorization=`Bearer ${p}`;const n=await fetch(s,{...d,headers:i});if(!n.ok){const u=await n.json().catch(()=>({}));throw new Error(u.message||`HTTP error! status: ${n.status}`)}return n.json()}}catch(r){console.error("Token refresh failed:",r)}if(!c.ok){const r=await c.json().catch(()=>({}));throw new Error(r.message||`HTTP error! status: ${c.status}`)}return c.json()},w={getAllUsers:async(e={})=>{const t=new URLSearchParams;e.role&&t.append("role",e.role),e.cohort&&t.append("cohort",e.cohort),e.search&&t.append("search",e.search),t.append("skip",(e.skip||0).toString()),t.append("limit",(e.limit||50).toString());const s=t.toString();return o(`/admin/users${s?`?${s}`:""}`)},getUserStats:async()=>o("/admin/users/stats"),bulkCreateUsers:async e=>{const t=new FormData;return t.append("file",e),fetch(`${h}/admin/users/bulk-create`,{method:"POST",headers:{Authorization:`Bearer ${y()}`},body:t}).then(async s=>{if(!s.ok){const l=await s.json().catch(()=>({}));throw new Error(l.message||`HTTP error! status: ${s.status}`)}return s.json()})},createUser:async e=>o("/admin/users",{method:"POST",body:JSON.stringify(e)}),updateUser:async(e,t)=>o(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),deleteUser:async e=>o(`/admin/users/${e}`,{method:"DELETE"}),toggleUserStatus:async(e,t)=>o(`/admin/users/${e}/status`,{method:"PUT",body:JSON.stringify({is_active:t})})},y=()=>{const e=localStorage.getItem("auth-storage");return e&&JSON.parse(e).state?.tokens?.accessToken||null};export{k as S,w as u};
